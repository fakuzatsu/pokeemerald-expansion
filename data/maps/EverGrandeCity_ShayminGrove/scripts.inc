EverGrandeCity_ShayminGrove_MapScripts::
	map_script MAP_SCRIPT_ON_TRANSITION, EverGrandeCity_ShayminGrove_OnTransition
	map_script MAP_SCRIPT_ON_RESUME, EverGrandeCity_ShayminGrove_OnResume
	.byte 0

EverGrandeCity_ShayminGrove_OnTransition:
	special GetDayOrNight
	goto_if_eq VAR_RESULT, 1, EverGrandeCity_ShayminGrove_OnResume_Night
	goto_if_eq VAR_RESULT, 0, EverGrandeCity_ShayminGrove_OnResume_Day
	goto EverGrandeCity_ShayminGrove_EventScript_TryHideOrShowShaymin
	end

EverGrandeCity_ShayminGrove_OnResume:
	call_if_set FLAG_SYS_CTRL_OBJ_DELETE, EverGrandeCity_ShayminGrove_EventScript_TryRemoveShaymin
	special GetDayOrNight
	goto_if_eq VAR_RESULT, 1, EverGrandeCity_ShayminGrove_OnResume_Night
	goto_if_eq VAR_RESULT, 0, EverGrandeCity_ShayminGrove_OnResume_Day
	end

EverGrandeCity_ShayminGrove_EventScript_TryRemoveShaymin::
	specialvar VAR_RESULT, GetBattleOutcome
	goto_if_ne VAR_RESULT, B_OUTCOME_CAUGHT, Common_EventScript_NopReturn
	removeobject VAR_LAST_TALKED
	return

EverGrandeCity_ShayminGrove_EventScript_TryHideOrShowShaymin::
	goto_if_set FLAG_CAUGHT_SHAYMIN, EverGrandeCity_ShayminGrove_EventScript_HideShaymin
	goto_if_set FLAG_DEFEATED_SHAYMIN, EverGrandeCity_ShayminGrove_EventScript_HideShaymin
	clearflag FLAG_TEMP_4
	end

EverGrandeCity_ShayminGrove_EventScript_HideShaymin::
	setflag FLAG_TEMP_4
	end

EverGrandeCity_ShayminGrove_OnResume_Night:
	setweather WEATHER_SHADE
	end

EverGrandeCity_ShayminGrove_OnResume_Day:
	setweather WEATHER_SUNNY
	end

EverGrandeCity_ShayminGrove_EventScript_Shaymin::
	lock
	faceplayer
	message EverGrandeCity_ShayminGrove_Text_ShayminCry
	playmoncry SPECIES_SHAYMIN, CRY_MODE_ENCOUNTER
	waitmoncry
	closemessage
	seteventmon SPECIES_SHAYMIN, 45
	setflag FLAG_SYS_CTRL_OBJ_DELETE
	special BattleSetup_StartLegendaryBattle
	waitstate
	clearflag FLAG_SYS_CTRL_OBJ_DELETE
	specialvar VAR_RESULT, GetBattleOutcome
	goto_if_eq VAR_RESULT, B_OUTCOME_WON, EverGrandeCity_ShayminGrove_EventScript_ShayminDefeated
	goto_if_eq VAR_RESULT, B_OUTCOME_RAN, EverGrandeCity_ShayminGrove_EventScript_PlayerOrShayminRan
	goto_if_eq VAR_RESULT, B_OUTCOME_PLAYER_TELEPORTED, EverGrandeCity_ShayminGrove_EventScript_PlayerOrShayminRan
	goto_if_eq VAR_RESULT, B_OUTCOME_MON_TELEPORTED, EverGrandeCity_ShayminGrove_EventScript_PlayerOrShayminRan
	setflag FLAG_CAUGHT_SHAYMIN
	release
	end

EverGrandeCity_ShayminGrove_EventScript_ShayminDefeated::
	setflag FLAG_DEFEATED_SHAYMIN
	setvar VAR_0x8004, SPECIES_SHAYMIN
	goto Common_EventScript_LegendaryRanAway
	release
	end

EverGrandeCity_ShayminGrove_EventScript_PlayerOrShayminRan::
	setvar VAR_0x8004, SPECIES_SHAYMIN
	goto Common_EventScript_LegendaryRanAway
	release
	end

EverGrandeCity_ShayminGrove_Text_ShayminCry:
	.string "Kyuu uuhn$"

